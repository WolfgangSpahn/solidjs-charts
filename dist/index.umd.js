(function(u,h){typeof exports=="object"&&typeof module<"u"?h(exports,require("solid-js")):typeof define=="function"&&define.amd?define(["exports","solid-js"],h):(u=typeof globalThis<"u"?globalThis:u||self,h(u.SolidJSCharts={},u.SolidJS))})(this,function(u,h){"use strict";function _(i,t,e){let o=e.length,r=t.length,n=o,l=0,s=0,f=t[r-1].nextSibling,a=null;for(;l<r||s<n;){if(t[l]===e[s]){l++,s++;continue}for(;t[r-1]===e[n-1];)r--,n--;if(r===l){const d=n<o?s?e[s-1].nextSibling:e[n-s]:f;for(;s<n;)i.insertBefore(e[s++],d)}else if(n===s)for(;l<r;)(!a||!a.has(t[l]))&&t[l].remove(),l++;else if(t[l]===e[n-1]&&e[s]===t[r-1]){const d=t[--r].nextSibling;i.insertBefore(e[s++],t[l++].nextSibling),i.insertBefore(e[--n],d),t[r]=e[n]}else{if(!a){a=new Map;let c=s;for(;c<n;)a.set(e[c],c++)}const d=a.get(t[l]);if(d!=null)if(s<d&&d<n){let c=l,g=1,y;for(;++c<r&&c<n&&!((y=a.get(t[c]))==null||y!==d+g);)g++;if(g>d-s){const L=t[l];for(;s<d;)i.insertBefore(e[s++],L)}else i.replaceChild(e[s++],t[l++])}else l++;else t[l++].remove()}}}function b(i,t,e,o){let r;const n=()=>{const s=document.createElement("template");return s.innerHTML=i,s.content.firstChild},l=()=>(r||(r=n())).cloneNode(!0);return l.cloneNode=l,l}function A(i,t,e){x(i)||(e==null?i.removeAttribute(t):i.setAttribute(t,e))}function N(i,t){x(i)||(t==null?i.removeAttribute("class"):i.className=t)}function w(i,t,e){if(!t)return e?A(i,"style"):t;const o=i.style;if(typeof t=="string")return o.cssText=t;typeof e=="string"&&(o.cssText=e=void 0),e||(e={}),t||(t={});let r,n;for(n in e)t[n]==null&&o.removeProperty(n),delete e[n];for(n in t)r=t[n],r!==e[n]&&(o.setProperty(n,r),e[n]=r);return e}function O(i,t,e){return h.untrack(()=>i(t,e))}function v(i,t,e,o){if(typeof t!="function")return p(i,t,o,e);h.createRenderEffect(r=>p(i,t(),r,e),o)}function x(i){return!!h.sharedConfig.context&&!h.sharedConfig.done&&(!i||i.isConnected)}function p(i,t,e,o,r){const n=x(i);if(n){!e&&(e=[...i.childNodes]);let s=[];for(let f=0;f<e.length;f++){const a=e[f];a.nodeType===8&&a.data.slice(0,2)==="!$"?a.remove():s.push(a)}e=s}for(;typeof e=="function";)e=e();if(t===e)return e;const l=typeof t;if(i=i,l==="string"||l==="number"){if(n||l==="number"&&(t=t.toString(),t===e))return e;e!==""&&typeof e=="string"?e=i.firstChild.data=t:e=i.textContent=t}else if(t==null||l==="boolean"){if(n)return e;e=m(i,e,o)}else{if(l==="function")return h.createRenderEffect(()=>{let s=t();for(;typeof s=="function";)s=s();e=p(i,s,e,o)}),()=>e;if(Array.isArray(t)){const s=[],f=e&&Array.isArray(e);if(S(s,t,e,r))return h.createRenderEffect(()=>e=p(i,s,e,o,!0)),()=>e;if(n)return s.length?e=[...i.childNodes]:e;s.length===0?e=m(i,e,o):f?e.length===0?$(i,s,o):_(i,e,s):(e&&m(i),$(i,s)),e=s}else if(t.nodeType){if(n&&t.parentNode)return e=t;Array.isArray(e)?m(i,e,null,t):e==null||e===""||!i.firstChild?i.appendChild(t):i.replaceChild(t,i.firstChild),e=t}}return e}function S(i,t,e,o){let r=!1;for(let n=0,l=t.length;n<l;n++){let s=t[n],f=e&&e[i.length],a;if(!(s==null||s===!0||s===!1))if((a=typeof s)=="object"&&s.nodeType)i.push(s);else if(Array.isArray(s))r=S(i,s,f)||r;else if(a==="function")if(o){for(;typeof s=="function";)s=s();r=S(i,Array.isArray(s)?s:[s],Array.isArray(f)?f:[f])||r}else i.push(s),r=!0;else{const d=String(s);f&&f.nodeType===3&&f.data===d?i.push(f):i.push(document.createTextNode(d))}}return r}function $(i,t,e=null){for(let o=0,r=t.length;o<r;o++)i.insertBefore(t[o],e)}function m(i,t,e,o){if(e===void 0)return i.textContent="";const r=o||document.createTextNode("");if(t.length){let n=!1;for(let l=t.length-1;l>=0;l--){const s=t[l];if(r!==s){const f=s.parentNode===i;!n&&!l?f?i.replaceChild(r,s):i.insertBefore(r,e):f&&s.remove()}else n=!0}}else i.insertBefore(r,e);return[r]}const I={responsive:!0,maintainAspectRatio:!1,animation:{duration:300},scales:{x:{grid:{display:!0}},y:{grid:{display:!0},beginAtZero:!0}},plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0,mode:"index",intersect:!1}},interaction:{mode:"nearest",axis:"x",intersect:!1}},j={line:{elements:{line:{tension:.1}}},bar:{scales:{x:{grid:{display:!1}}}},pie:{scales:{},plugins:{legend:{position:"right"}}},doughnut:{scales:{},plugins:{legend:{position:"right"}}},scatter:{plugins:{legend:{display:!1}}},bubble:{plugins:{legend:{display:!1}}},radar:{scales:{r:{beginAtZero:!0,grid:{display:!0}}}}};function E(i,t){const e=[];return i?(!["scatter","bubble"].includes(t)&&!Array.isArray(i.labels)&&e.push("Chart data must include labels array"),!Array.isArray(i.datasets)||i.datasets.length===0?e.push("Chart data must include at least one dataset"):i.datasets.forEach((o,r)=>{if(o.label||e.push(`Dataset at index ${r} must have a label`),!Array.isArray(o.data))e.push(`Dataset at index ${r} must have a data array`);else switch(t){case"bubble":o.data.every(n=>typeof n=="object"&&n!==null&&"x"in n&&"y"in n&&"r"in n)||e.push(`Dataset at index ${r} for bubble chart must contain objects with x, y, r properties`);break;case"scatter":o.data.every(n=>typeof n=="object"&&n!==null&&"x"in n&&"y"in n)||e.push(`Dataset at index ${r} for scatter chart must contain objects with x, y properties`);break;default:o.data.every(n=>typeof n=="number")||e.push(`Dataset at index ${r} for ${t} chart must contain numbers`)}}),{isValid:e.length===0,errors:e}):(e.push("Chart data is required"),{isValid:!1,errors:e})}function T(i,t,e={}){const o=j[i]||{},r={...I,...o,...e,responsive:!0,maintainAspectRatio:!1};return{type:i,data:t,options:r}}function D(){return`solidjs-chart-${Math.random().toString(36).substr(2,9)}`}function C(i){try{i&&typeof i.destroy=="function"&&i.destroy()}catch(t){console.warn("Error destroying chart:",t)}}function R(){try{return typeof window<"u"&&"Chart"in window}catch{return!1}}var M=b("<canvas>"),B=b("<div>"),F=b("<div class=chart-error-message><div><div style=font-weight:600;margin-bottom:8px>Chart Error</div><div>");const P=i=>{const t=h.mergeProps({width:400,height:200,options:{}},i),e=()=>E(t.data,t.type),o=()=>e().isValid;let r,n=null,l;const s=async()=>{if(!(!r||!o()))if(n&&l!==t.type&&(C(n),n=null),n)n.data=t.data,t.options&&Object.assign(n.options,t.options),n.update("none");else try{const{Chart:f,registerables:a}=await import("chart.js");f.register(...a);const d=T(t.type,t.data,t.options);n=new f(r,d),l=t.type,t.onChartClick&&(r.onclick=c=>{if(!n)return;const g=n.getElementsAtEventForMode(c,"nearest",{intersect:!0},!1);t.onChartClick({event:c,elements:g,chart:n})}),t.onChartHover&&(r.onmousemove=c=>{if(!n)return;const g=n.getElementsAtEventForMode(c,"nearest",{intersect:!1},!1);t.onChartHover({event:c,elements:g,chart:n})})}catch(f){console.error("Failed to initialize chart:",f)}};return h.createEffect(()=>{t.type,t.data,t.options,s()}),h.onCleanup(()=>{n&&(C(n),n=null)}),(()=>{var f=B();return v(f,h.createComponent(h.Show,{get when(){return o()},get fallback(){return(()=>{var a=F(),d=a.firstChild,c=d.firstChild,g=c.nextSibling;return v(g,()=>e().errors.join(", ")),h.createRenderEffect(y=>w(a,`
            display: flex;
            align-items: center;
            justify-content: center;
            width: ${t.width}px;
            height: ${t.height}px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            color: #dc3545;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 14px;
            text-align: center;
            padding: 20px;
          `,y)),a})()},get children(){var a=M();return O(d=>{r=d,d&&s()},a),h.createRenderEffect(d=>{var c=t.width,g=t.height,y=`
            display: block;
            box-sizing: border-box;
            width: ${t.width}px;
            height: ${t.height}px;
          `;return c!==d.e&&A(a,"width",d.e=c),g!==d.t&&A(a,"height",d.t=g),d.a=w(a,y,d.a),d},{e:void 0,t:void 0,a:void 0}),a}})),h.createRenderEffect(a=>{var d=`solidjs-chart-container ${t.class||""}`,c=typeof t.style=="string"?t.style:void 0,g=!o();return d!==a.e&&N(f,a.e=d),a.t=w(f,c,a.t),g!==a.a&&f.classList.toggle("chart-error",a.a=g),a},{e:void 0,t:void 0,a:void 0}),f})()};function H(){let i=null;const t=async(o,r,n,l)=>{i&&(C(i),i=null);const s=E(n,r);if(!s.isValid)throw new Error(`Invalid chart data: ${s.errors.join(", ")}`);const{Chart:f,registerables:a}=await import("chart.js");f.register(...a);const d=T(r,n,l);return i=new f(o,d),i},e=()=>{i&&(C(i),i=null)};return h.onCleanup(()=>{e()}),{createChart:t,destroyChart:e}}u.Chart=P,u.DEFAULT_CHART_OPTIONS=I,u.TYPE_SPECIFIC_OPTIONS=j,u.createChartConfig=T,u.default=P,u.generateChartId=D,u.isChartJSAvailable=R,u.safeDestroyChart=C,u.useChart=H,u.validateChartData=E,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
